This is a Rust based address import tool for the G-NAF australian address database.

It will take all these CSV files that are meant to be imported into an SQL DB and create a beautiful and simple MongoDB collection out of them that is far more useful.

1) Get address DB from:

https://data.gov.au/dataset/ds-dga-19432f89-dc3a-4ef3-b943-5326ef1dbecc/details?q=

2) Download, Unzip.

3) Import all the data to a lot of MongoDB databases.

Edit the import.sh script and change the path where you unzipped your downloaded data.

Then import into a DB with:

$ ./import.sh yourDBname

After this your mongo DB will have a tremendous number of collections that are used by the Rust based tool.

You will need a lot of disk space. I unzipped the files onto an external drive and then used that to import from since your MongoDB will grow considerably.

4) Run the Rust tool to create a new collection called "aus"

Once you have it all imported into MongoDB, the Rust tool below uses the MongoDB so you don't need all the unzipped files anymore.

$ cargo run yourDBname aus

And wait for a day or so. On my old MacBook pro it does 250 records every second.

There are 15271641 records or so, so do the math :-) (I did, 16.96849 hours)

Afterwards you will have a nice new collection which has this schema:

{
  "_id": ObjectId("5e910adc003cbe3100233296"),
  "STATE": 5,
  "LOCALITY": "SPRING HILL",
  "ADDRESS_DETAIL_PID": "GAQLD163300318",
  "POSTCODE": 4000,
  "FLAT_TYPE": "SE",
  "LEVEL_TYPE": "L",
  "STREET": "WICKHAM TERRACE ",
  "FLAT_NUMBER": "3",
  "LEVEL_NUMBER": "4",
  "NUMBER_FIRST": "155",
  "NUMBER_LAST": "157",
  "LONG": 153.0250418800000034,
  "LAT": -27.464509963989257812
}

- There will always be a "NUMBER_FIRST" which is basically the house number.
- There will only be a "NUMBER_LAST" if the address spans a few house numbers.
- There will only be a "FLAT_TYPE" and "FLAT_NUMBER" if it is a block of flats.
- There will only be a "LEVEL_TYPE" and "LEVEL_NUMBER" if it is a block of flats that has multiple levels.
- The "ADDRESS_DETAIL_PID" is useful if you want something else later on from the G-NAF database.

The state ids are:

1 = ACT
2 = NSW
3 = NT
4 = OT
5 = QLD
6 = SA
7 = TAS
8 = VIC
9 = WA

5) Index your new DB 

./index.sh yourDBname aus

Where "aus" is the name of the new collection.

To create useful indexes on the collection.

6) Drop all the unused collections

./drop.sh yourDBname

To drop all the collections that were used.

7) Backup your new DB

To backup the DB you created:

./backup.sh yourDBname aus aus.tgz




